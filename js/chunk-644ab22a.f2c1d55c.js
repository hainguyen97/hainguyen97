(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-644ab22a"],{"0759":function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var r=n("2b0e"),a=n("b42e"),i=n("c637"),s=n("a723"),o=n("992e"),c=n("d82f"),l=n("cf75"),u=n("fa73"),d=n("7386"),p=n("aa0d");function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=function e(t,n){if(!t)return null;var r=(t.$options||{}).components,a=r[n];return a||e(t.$parent,n)},v=Object(l["d"])(Object(c["m"])(b(b({},Object(c["j"])(p["b"],["content","stacked"])),{},{icon:Object(l["c"])(s["u"]),stacked:Object(l["c"])(s["g"],!1)})),i["ib"]),g=r["default"].extend({name:i["ib"],functional:!0,props:v,render:function(e,t){var n=t.data,r=t.props,i=t.parent,s=Object(u["e"])(Object(u["h"])(r.icon||"")).replace(o["p"],"");return e(s&&f(i,"BIcon".concat(s))||d["a"],Object(a["a"])(n,{props:b(b({},r),{},{icon:null})}))}})},"223c":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"toastification"},[n("div",{staticClass:"d-flex align-items-start"},[n("b-avatar",{staticClass:"mr-75 flex-shrink-0",attrs:{variant:e.variant,size:"1.8rem"}},[n("feather-icon",{attrs:{icon:e.icon,size:"15"}})],1),n("div",{staticClass:"d-flex flex-grow-1"},[n("div",[e.title?n("h5",{staticClass:"mb-0 font-weight-bolder toastification-title",class:"text-"+e.variant,domProps:{textContent:e._s(e.title)}}):e._e(),e.text?n("small",{staticClass:"d-inline-block text-body",domProps:{textContent:e._s(e.text)}}):e._e()]),n("span",{staticClass:"cursor-pointer toastification-close-icon ml-auto ",on:{click:function(t){return e.$emit("close-toast")}}},[e.hideClose?e._e():n("feather-icon",{staticClass:"text-body",attrs:{icon:"XIcon"}})],1)])],1)])},a=[],i=n("e8a3"),s={components:{BAvatar:i["a"]},props:{variant:{type:String,default:"primary"},icon:{type:String,default:null},title:{type:String,default:null},text:{type:String,default:null},hideClose:{type:Boolean,default:!1}}},o=s,c=(n("b549"),n("2877")),l=Object(c["a"])(o,r,a,!1,null,"55dd3057",null);t["a"]=l.exports},"62d3":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"p-6"},[n("el-card",[n("el-tabs",[n("el-tab-pane",{attrs:{label:"Roles"}},[n("el-button",{attrs:{type:"primary",plain:""},on:{click:e.handleShowAddRole}},[e._v("Add")]),n("el-table",{staticClass:"w-full mt-1",attrs:{data:e.roles,border:!0}},[n("el-table-column",{attrs:{type:"index",width:"50",label:"#"}}),n("el-table-column",{attrs:{prop:"name",label:"Name"}}),n("el-table-column",{attrs:{label:"Permissions"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.permissions&&t.row.permissions.length>0?n("div",e._l(t.row.permissions,(function(t,r){return n("el-tag",{key:r,staticClass:"m-2"},[e._v(e._s(t.name))])})),1):e._e()]}}])}),n("el-table-column",{attrs:{label:"Actions",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("div",{staticClass:"text-center"},[n("feather-icon",{directives:[{name:"show",rawName:"v-show",value:!0,expression:"true"}],staticClass:"rolepermissionicon",style:{color:"#2A6EBB",cursor:"pointer",marginLeft:"10px"},attrs:{icon:"EditIcon",title:"Sửa"},on:{click:function(n){return e.handleEditRole(t.row)}}}),n("feather-icon",{directives:[{name:"show",rawName:"v-show",value:!0,expression:"true"}],staticClass:"rolepermissionicon",style:{color:"#2A6EBB",cursor:"pointer",marginLeft:"10px"},attrs:{icon:"TrashIcon",title:"Xóa"},on:{click:function(n){return e.handleDeleteRole(t.row)}}})],1)]}}])})],1)],1),n("el-tab-pane",{attrs:{label:"Permissions"}},[n("div",[n("el-table",{staticClass:"w-full mt-6",attrs:{data:e.permissions,border:!0}},[n("el-table-column",{attrs:{type:"index",width:"50",label:"#"}}),n("el-table-column",{attrs:{prop:"name",label:"Name"}}),n("el-table-column",{attrs:{prop:"displayName",label:"Display Name"}}),n("el-table-column",{attrs:{label:"Actions",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("div",{staticClass:"text-center"},[n("feather-icon",{directives:[{name:"show",rawName:"v-show",value:!0,expression:"true"}],staticClass:"rolepermissionicon",style:{color:"#2A6EBB",cursor:"pointer",marginLeft:"10px"},attrs:{icon:"EditIcon",title:"Sửa"},on:{click:function(n){return e.handleEditPermission(t.row)}}}),n("feather-icon",{directives:[{name:"show",rawName:"v-show",value:!0,expression:"true"}],staticClass:"rolepermissionicon",style:{color:"#2A6EBB",cursor:"pointer",marginLeft:"10px"},attrs:{icon:"TrashIcon",title:"Xóa"},on:{click:function(n){return e.handleDeletePermission(t.row)}}})],1)]}}])})],1)],1)])],1)],1)],1),n("el-dialog",{attrs:{title:"Add/Edit",visible:e.dialog},on:{"update:visible":function(t){e.dialog=t}}},[n("el-form",[n("el-form-item",{attrs:{label:"Role Name"}},[n("el-input",{attrs:{id:"roleName",type:"text",required:"",placeholder:"Role Name"},model:{value:e.role.name,callback:function(t){e.$set(e.role,"name",t)},expression:"role.name"}})],1),n("el-form-item",{attrs:{label:"Display Name"}},[n("el-input",{attrs:{id:"displayName",type:"text",required:"",placeholder:"Role Display Name"},model:{value:e.role.displayName,callback:function(t){e.$set(e.role,"displayName",t)},expression:"role.displayName"}})],1),n("el-form-item",{attrs:{label:"Chọn Permissions:"}},[n("el-checkbox-group",{model:{value:e.permissionsRoles,callback:function(t){e.permissionsRoles=t},expression:"permissionsRoles"}},e._l(e.permissions,(function(t){return n("el-checkbox",{key:t.id,attrs:{label:t.id}},[e._v(e._s(t.name))])})),1)],1),n("el-button",{staticClass:"mt-3",attrs:{block:""},on:{click:e.handleAddUpdateRole}},[e._v("Save ")])],1)],1),n("el-dialog",{attrs:{title:"Edit Permission",visible:e.dialogPermission},on:{"update:visible":function(t){e.dialogPermission=t}}},[n("el-form",[n("el-form-item",{attrs:{label:"Permission Name"}},[n("el-input",{attrs:{id:"keyword",type:"text",required:"",placeholder:"Role Name"},model:{value:e.rowPermission.name,callback:function(t){e.$set(e.rowPermission,"name",t)},expression:"rowPermission.name"}})],1),n("el-form-item",{attrs:{label:"Display Name"}},[n("el-input",{attrs:{id:"keyword",type:"text",required:"",placeholder:"Role Display Name"},model:{value:e.rowPermission.displayName,callback:function(t){e.$set(e.rowPermission,"displayName",t)},expression:"rowPermission.displayName"}})],1),n("el-button",{staticClass:"mt-3",attrs:{block:""},on:{click:e.savePermission}},[e._v("Save ")])],1)],1)],1)},a=[],i=n("1da1"),s=(n("b0c0"),n("d81d"),n("96cf"),n("7f80")),o=n("223c"),c={components:{},data:function(){return{role:{name:"",displayName:"",id:"",permissions:[],allPermissions:[]},rowPermission:{id:"",name:"",displayName:""},title:"Thêm bài học",items:[{text:"BimSpeed",href:"/"},{text:"Admin",href:"/admin"},{text:"Quản trị hệ thống",href:"/admin/quan-tri-he-thong"},{text:"Quản lý Roles",active:!0}],isAdd:!0,dialog:!1,dialogPermission:!1,id:"",name:"Revit",permissions:[],permissionDropDown:[],roles:[],permissionsRoles:[]}},methods:{handleDeletePermission:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,s["a"].delete("permissions/".concat(e.id));case 3:r=n.sent,r.data.succeeded&&t.$toast({component:o["a"],position:"top-right",props:{title:"Success",text:"Delete Permission thành công",variant:"success"}}),n.next=9;break;case 7:n.prev=7,n.t0=n["catch"](0);case 9:return n.next=11,t.getPermissions();case 11:case"end":return n.stop()}}),n,null,[[0,7]])})))()},handleShowAddRole:function(){this.isAdd=!0,this.id=null,this.dialog=!0},savePermission:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,s["a"].put("permissions",e.rowPermission);case 3:if(n=t.sent,!n.data.succeeded){t.next=8;break}return e.$toast({component:o["a"],position:"top-right",props:{title:"Success",text:"Update Permission thành công",variant:"success"}}),t.next=8,e.getPermissions();case 8:t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](0),e.$toast({component:o["a"],position:"top-right",props:{title:"Failed",text:"Update Permission không thành công",variant:"danger"}});case 13:e.dialogPermission=!1;case 14:case"end":return t.stop()}}),t,null,[[0,10]])})))()},handleDeleteRole:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,s["a"].delete("roles",{params:{id:e.id}});case 3:if(r=n.sent,!r.data.succeeded){n.next=8;break}return t.$toast({component:o["a"],position:"top-right",props:{title:"Success",text:"Bạn đã xoá thành công role ".concat(e.name),variant:"success"}}),n.next=8,t.getRoles();case 8:n.next=13;break;case 10:n.prev=10,n.t0=n["catch"](0),t.$toast({component:o["a"],position:"top-right",props:{title:"Failed",text:"Xoá role không thành công",variant:"danger"}});case 13:case"end":return n.stop()}}),n,null,[[0,10]])})))()},handleEditRole:function(e){var t=Object.assign({},e);this.isAdd=!1,this.role=t,this.permissionsRoles=t.permissions.map((function(e){return e.id})),this.dialog=!0},getPermissions:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,s["a"].get("permissions/all");case 3:n=t.sent,e.permissions=n.data.data.items,e.allPermissions=n.data.data.items,t.next=10;break;case 8:t.prev=8,t.t0=t["catch"](0);case 10:case"end":return t.stop()}}),t,null,[[0,8]])})))()},getRoles:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,s["a"].get("roles/all");case 3:n=t.sent,console.log(n),e.roles=n.data.data,t.next=10;break;case 8:t.prev=8,t.t0=t["catch"](0);case 10:case"end":return t.stop()}}),t,null,[[0,8]])})))()},handleEditPermission:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:try{r={id:e.id,name:e.name,displayName:e.displayName},t.rowPermission=r,t.dialogPermission=!0}catch(a){console.log(a)}case 1:case"end":return n.stop()}}),n)})))()},handleAddUpdateRole:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.isAdd){t.next=16;break}return t.prev=1,e.dialog=!1,e.role.permissions=e.permissionsRoles,t.next=6,s["a"].post("roles",e.role);case 6:return t.next=8,e.getRoles();case 8:e.$toast({component:o["a"],position:"top-right",props:{title:"Success",text:"Bạn đã thêm thành công role ".concat(e.role.name),variant:"success"}}),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](1),e.$toast({component:o["a"],position:"top-right",props:{title:"Failed",text:"Thêm Role không thành công",variant:"danger"}});case 14:t.next=31;break;case 16:return t.prev=16,e.dialog=!1,n=e.permissions.map((function(e){return e.id})),t.next=21,s["a"].put("roles/".concat(e.role.id,"/name"),e.role);case 21:return t.next=23,s["a"].put("roles/".concat(e.role.id,"/permissions"),{deletePermissionIds:n,permissionIds:e.permissionsRoles});case 23:e.$toast({component:o["a"],position:"top-right",props:{title:"Success",text:"Update role thành công",variant:"success"}}),t.next=29;break;case 26:t.prev=26,t.t1=t["catch"](16),e.$toast({component:o["a"],position:"top-right",props:{title:"Failed",text:"Update Role không thành công",variant:"danger"}});case 29:return t.next=31,e.getRoles();case 31:case"end":return t.stop()}}),t,null,[[1,11],[16,26]])})))()}},created:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getPermissions();case 2:return t.next=4,e.getRoles();case 4:case"end":return t.stop()}}),t)})))()}},l=c,u=(n("f63d"),n("2877")),d=Object(u["a"])(l,r,a,!1,null,"5bd1b862",null);t["default"]=d.exports},"65eb":function(e,t,n){},"8d81":function(e,t,n){},b549:function(e,t,n){"use strict";n("8d81")},e8a3:function(e,t,n){"use strict";n.d(t,"b",(function(){return P})),n.d(t,"a",(function(){return C}));var r=n("2b0e"),a=n("c637"),i=n("0056"),s=n("a723"),o=n("9b76"),c=n("7b1e"),l=n("3a58"),u=n("d82f"),d=n("cf75"),p=n("4a38"),m=n("8c18"),b=n("0759"),h=n("7386"),f=n("1947"),v=n("aa59");function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){w(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var O="b-avatar",y=["sm",null,"lg"],j=.4,k=.7*j,P=function(e){return e=Object(c["n"])(e)&&Object(c["i"])(e)?Object(l["b"])(e,0):e,Object(c["h"])(e)?"".concat(e,"px"):e||null},R=Object(u["j"])(v["b"],["active","event","routerTag"]),S=Object(d["d"])(Object(u["m"])(x(x({},R),{},{alt:Object(d["c"])(s["u"],"avatar"),ariaLabel:Object(d["c"])(s["u"]),badge:Object(d["c"])(s["j"],!1),badgeLeft:Object(d["c"])(s["g"],!1),badgeOffset:Object(d["c"])(s["u"]),badgeTop:Object(d["c"])(s["g"],!1),badgeVariant:Object(d["c"])(s["u"],"primary"),button:Object(d["c"])(s["g"],!1),buttonType:Object(d["c"])(s["u"],"button"),icon:Object(d["c"])(s["u"]),rounded:Object(d["c"])(s["j"],!1),size:Object(d["c"])(s["p"]),square:Object(d["c"])(s["g"],!1),src:Object(d["c"])(s["u"]),text:Object(d["c"])(s["u"]),variant:Object(d["c"])(s["u"],"secondary")})),a["c"]),C=r["default"].extend({name:a["c"],mixins:[m["a"]],inject:{bvAvatarGroup:{default:null}},props:S,data:function(){return{localSrc:this.src||null}},computed:{computedSize:function(){var e=this.bvAvatarGroup;return P(e?e.size:this.size)},computedVariant:function(){var e=this.bvAvatarGroup;return e&&e.variant?e.variant:this.variant},computedRounded:function(){var e=this.bvAvatarGroup,t=!(!e||!e.square)||this.square,n=e&&e.rounded?e.rounded:this.rounded;return t?"0":""===n||(n||"circle")},fontStyle:function(){var e=this.computedSize,t=-1===y.indexOf(e)?"calc(".concat(e," * ").concat(j,")"):null;return t?{fontSize:t}:{}},marginStyle:function(){var e=this.computedSize,t=this.bvAvatarGroup,n=t?t.overlapScale:0,r=e&&n?"calc(".concat(e," * -").concat(n,")"):null;return r?{marginLeft:r,marginRight:r}:{}},badgeStyle:function(){var e=this.computedSize,t=this.badgeTop,n=this.badgeLeft,r=this.badgeOffset,a=r||"0px";return{fontSize:-1===y.indexOf(e)?"calc(".concat(e," * ").concat(k," )"):null,top:t?a:null,bottom:t?null:a,left:n?a:null,right:n?null:a}}},watch:{src:function(e,t){e!==t&&(this.localSrc=e||null)}},methods:{onImgError:function(e){this.localSrc=null,this.$emit(i["x"],e)},onClick:function(e){this.$emit(i["f"],e)}},render:function(e){var t,n=this.computedVariant,r=this.disabled,a=this.computedRounded,i=this.icon,s=this.localSrc,c=this.text,l=this.fontStyle,u=this.marginStyle,m=this.computedSize,g=this.button,j=this.buttonType,k=this.badge,P=this.badgeVariant,S=this.badgeStyle,C=!g&&Object(p["d"])(this),N=g?f["a"]:C?v["a"]:"span",A=this.alt,_=this.ariaLabel||null,D=null;this.hasNormalizedSlot()?D=e("span",{staticClass:"b-avatar-custom"},[this.normalizeSlot()]):s?(D=e("img",{style:n?{}:{width:"100%",height:"100%"},attrs:{src:s,alt:A},on:{error:this.onImgError}}),D=e("span",{staticClass:"b-avatar-img"},[D])):D=i?e(b["a"],{props:{icon:i},attrs:{"aria-hidden":"true",alt:A}}):c?e("span",{staticClass:"b-avatar-text",style:l},[e("span",c)]):e(h["m"],{attrs:{"aria-hidden":"true",alt:A}});var E=e(),$=this.hasNormalizedSlot(o["d"]);if(k||""===k||$){var z=!0===k?"":k;E=e("span",{staticClass:"b-avatar-badge",class:w({},"badge-".concat(P),P),style:S},[$?this.normalizeSlot(o["d"]):z])}var B={staticClass:O,class:(t={},w(t,"".concat(O,"-").concat(m),m&&-1!==y.indexOf(m)),w(t,"badge-".concat(n),!g&&n),w(t,"rounded",!0===a),w(t,"rounded-".concat(a),a&&!0!==a),w(t,"disabled",r),t),style:x(x({},u),{},{width:m,height:m}),attrs:{"aria-label":_||null},props:g?{variant:n,disabled:r,type:j}:C?Object(d["e"])(R,this):{},on:g||C?{click:this.onClick}:{}};return e(N,B,[D,E])}})},f63d:function(e,t,n){"use strict";n("65eb")}}]);
//# sourceMappingURL=chunk-644ab22a.f2c1d55c.js.map